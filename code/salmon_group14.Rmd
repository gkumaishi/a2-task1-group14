---
title: "Assignment 2 Task 1"
author: "Grace Kumaishi, Kaley Dodson, Quin Smith"
date: "1/31/2021"
output: 
  html_document:
    theme: cerulean
    code_folding: hide
runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(tidyverse)
library(shiny)
library(here)
library(janitor)
library(lubridate)
library(tsibble)
library(feasts)
library(slider)
library(patchwork)

# read in data (new way with pivot_longer())
willamette_fish <- read.csv(here("data", "willamette_fish_passage.csv")) %>% 
  clean_names() %>% 
  pivot_longer(
    cols = c(steelhead, coho, jack_coho),
    names_to = "species",
    values_to = "fish_count"
  )

#old way
willamette_fish2 <- read.csv(here("data", "willamette_fish_passage.csv")) %>% 
  clean_names()
```

Your group's .Rmd must be customized as follows:
- With a non-default theme (for example using bootstrap themes, with a custom theme, or with a theme from another package)
- With a separate tab for each of the three sections below the Overview (see this section on tabs in RMarkdown: The Definitive Guide by Yihui Xie, J. J. Allaire, and Garrett Grolemund)
- With code folding applied. All code used to wrangle the data and prepare your graphs & tables should be available for us to see if we click on the code buttons (but hide any warnings & messages)
- The document should be cohesive in presentation and communication (e.g. all graphs should use the same theming, consistent color schemes, etc.)

## Overview {.tabset}

![Salmon, Image Source: Portland General Electric](http://www.cbr.washington.edu/img/hydro/willamette_falls.jpg)

- An engaging image (with caption, including photo credit) that is relevant to the dataset
- A brief summary (3 - 4 sentences) of the dataset, and what is included in this “report”
- A map of the fish ladder location (you can make this in R on your own, or include an existing map appropriately licensed, with attribution)
- A professionally formatted data citation
- Remember: All code that you used to wrangle the data and prepare the graphs should be available to see if we click on the Code buttons. 

```{r}
#data wrangling, turn dataset into a tsibble (new way with pivot_longer())

fish_ts <- willamette_fish %>% 
  mutate(date = mdy(date)) %>% 
  as_tsibble(key = species, index = date)

#old way
fish_ts2 <- willamette_fish2 %>% 
  mutate(date = mdy(date)) %>% 
  as_tsibble(key = NULL, index = date)

```


### Tab 1 (QS)

```{r, warning = FALSE, message = FALSE, fig.width = 10, fig.height = 8}
#time series plot of adult passage for coho, jack coho, and steelhead (new way with pivot_longer())

fish_tsplot <- fish_ts %>%
  replace_na(list(fish_count = 0))

ggplot(data = fish_tsplot, aes(x = date, y = fish_count, color = species)) +
  geom_line() +
  theme_bw()

#old way
fish_tsplot2 <- fish_ts2 %>%
  replace_na(list(coho = 0, jack_coho = 0, steelhead = 0))

coho_plot <- fish_tsplot2 %>% 
  ggplot(aes(x = date)) +
  geom_line(aes(y = coho), color = "#317eb1") +
  labs(y = "Coho", x = "") +
  theme_bw()

jc_plot <- fish_tsplot2 %>% 
  ggplot(aes(x = date)) +
  geom_line(aes(y = jack_coho), color = "#317eb1") +
  labs(y = "Jack coho", x = "") +
  theme_bw()

sh_plot <- fish_tsplot2 %>% 
  ggplot(aes(x = date)) +
  geom_line(aes(y = steelhead), color = "#317eb1") +
  labs(y = "Steelhead", x = "Year") +
  theme_bw()

comp_graph <- coho_plot / jc_plot / sh_plot
comp_graph

```  

### Tab 2 (GK)

```{r}

```

### Tab 3 (KD)

```{r}

```

